import{_ as H,g as P,c as y,w as l,b as s,r as n,a as r,t as c,d as _,f as u,h as b,F as B,e as q,n as j,o as a}from"./app-MG2UItCA.js";import{a as R}from"./adminPaginationMixin-DN7Wb3ng.js";import{Q as X}from"./quill.snow-Dns5T9t0.js";import{r as Y,n as Z}from"./uploads-CnEkgyD_.js";const $={name:"ServiceFormDialog",mixins:[R],props:{modelValue:{type:Boolean,default:!1},editingService:{type:Object,default:null}},emits:["update:modelValue","saved"],data(){return{activeTab:"basic",loading:!1,saving:!1,imageFile:null,imagePreview:null,uploadingImage:!1,imageError:null,ogImageFile:null,ogImagePreview:null,uploadingOgImage:!1,ogImageError:null,featuresText:"",benefitsText:"",quillEditor:null,form:{title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0}}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},suggestedMetaTitle(){return this.form.meta_title||!this.form.title?null:this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title},suggestedMetaDescription(){if(this.form.meta_description||!this.form.short_description)return null;let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}return t},suggestedMetaKeywords(){return this.form.meta_keywords?null:this.generateSuggestedKeywords()}},watch:{modelValue(t){t&&(this.activeTab="basic",this.editingService?this.loadServiceForEdit():this.resetForm())},editingService:{handler(t){t&&this.dialog?this.loadServiceForEdit():!t&&this.dialog&&this.resetForm()},immediate:!1},activeTab(t){t==="content"&&this.dialog&&!this.loading?setTimeout(()=>{this.initEditor()},300):t!=="content"&&this.quillEditor&&this.destroyEditor()}},methods:{resetForm(){this.quillEditor&&this.destroyEditor(),this.form={title:"",slug:"",short_description:"",description:"",icon:"",image:"",price_range:"",features:[],benefits:[],meta_title:"",meta_description:"",meta_keywords:"",og_image:"",published:!1,order:0},this.imageFile=null,this.imagePreview=null,this.imageError=null,this.ogImageFile=null,this.ogImagePreview=null,this.ogImageError=null,this.featuresText="",this.benefitsText="",this.$refs.formRef&&this.$refs.formRef.resetValidation()},async loadServiceForEdit(){if(this.editingService){this.loading=!0;try{const e=(await P.get(`/api/v1/services/${this.editingService.id}`,{headers:this.getAuthHeaders()})).data;this.form={title:e.title||"",slug:e.slug||"",short_description:e.short_description||"",description:e.description||"",icon:e.icon||"",image:e.image||"",price_range:e.price_range||"",features:Array.isArray(e.features)?[...e.features]:[],benefits:Array.isArray(e.benefits)?[...e.benefits]:[],meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||"",og_image:e.og_image||"",published:e.published||!1,order:e.order||0};const h=this.normalizeImageInput(e.image||""),x=this.normalizeImageInput(e.og_image||"");this.form.image=h,this.form.og_image=x,this.imagePreview=this.resolveImageUrl(e.image||h),this.ogImagePreview=this.resolveImageUrl(e.og_image||x),this.featuresText=Array.isArray(e.features)?e.features.join(`
`):"",this.benefitsText=Array.isArray(e.benefits)?e.benefits.join(`
`):""}catch(t){this.handleApiError(t,"Failed to load service data"),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){!this.saving&&!this.loading&&(this.destroyEditor(),this.dialog=!1,this.resetForm())},initEditor(){this.quillEditor&&this.destroyEditor(),this.$nextTick(()=>{if(this.$refs.editorContainer&&this.activeTab==="content")try{this.$refs.editorContainer.innerHTML="",this.quillEditor=new X(this.$refs.editorContainer,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]},placeholder:"Enter detailed description of the service..."}),this.form.description&&(this.quillEditor.root.innerHTML=this.form.description),this.quillEditor.on("text-change",()=>{this.form.description=this.quillEditor.root.innerHTML}),this.quillEditor.on("selection-change",()=>{this.form.description=this.quillEditor.root.innerHTML})}catch(t){console.error("Error initializing Quill editor:",t),this.showError("Failed to initialize text editor")}})},destroyEditor(){if(this.quillEditor){try{if(this.quillEditor.root&&this.quillEditor.root.innerHTML){const t=this.quillEditor.root.innerHTML.trim();t&&t!=="<p><br></p>"&&(this.form.description=t)}}catch(t){console.error("Error saving editor content:",t)}try{this.quillEditor=null,this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")}catch(t){console.error("Error destroying editor:",t),this.quillEditor=null}}else this.$refs.editorContainer&&(this.$refs.editorContainer.innerHTML="")},generateSlug(){this.form.title&&!this.editingService&&(this.form.slug=this.form.title.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))},handleImageSelect(t){if(this.imageError=null,t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.imageError="Image file size must be less than 5MB",this.imageFile=null;return}if(e&&!e.type.startsWith("image/")){this.imageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.imageFile=null;return}if(this.imageFile=e,e){const h=new FileReader;h.onload=x=>{this.imagePreview=x.target.result},h.onerror=()=>{this.showError("Failed to read image file"),this.imageFile=null,this.imagePreview=null},h.readAsDataURL(e)}else this.imagePreview=null}else this.imageFile=null,this.form.image?this.imagePreview=this.resolveImageUrl(this.form.image):this.imagePreview=null},removeImage(){confirm("Are you sure you want to remove this image?")&&(this.imagePreview=null,this.imageFile=null,this.form.image="",this.imageError=null)},handleOgImageSelect(t){if(this.ogImageError=null,t){const e=Array.isArray(t)?t[0]:t;if(e&&e.size>5242880){this.ogImageError="OG image file size must be less than 5MB",this.ogImageFile=null;return}if(e&&!e.type.startsWith("image/")){this.ogImageError="Please select a valid image file (jpeg, jpg, png, gif, webp)",this.ogImageFile=null;return}if(this.ogImageFile=e,e){const h=new FileReader;h.onload=x=>{this.ogImagePreview=x.target.result},h.onerror=()=>{this.showError("Failed to read image file"),this.ogImageFile=null,this.ogImagePreview=null},h.readAsDataURL(e)}else this.ogImagePreview=null}else this.ogImageFile=null,this.form.og_image?this.ogImagePreview=this.resolveImageUrl(this.form.og_image):this.ogImagePreview=null},removeOgImage(){confirm("Are you sure you want to remove the Open Graph image?")&&(this.ogImagePreview=null,this.ogImageFile=null,this.form.og_image="",this.ogImageError=null)},generateMetaTitle(){this.form.title&&(this.form.meta_title=this.form.title.length>60?this.form.title.substring(0,57)+"...":this.form.title)},generateMetaDescription(){if(this.form.short_description){let t=this.form.short_description;if(t.length>160){t=t.substring(0,157);const e=t.lastIndexOf(" ");e>120?t=t.substring(0,e)+"...":t+="..."}this.form.meta_description=t}},generateMetaKeywords(){const t=this.generateSuggestedKeywords();t&&(this.form.meta_keywords=t)},generateSuggestedKeywords(){const t=[];if(this.form.title){const x=this.form.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>3).slice(0,5);t.push(...x)}if(this.form.short_description){const x=this.form.short_description.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(i=>i.length>4).slice(0,5);t.push(...x)}this.form.features&&this.form.features.length>0&&this.form.features.forEach(x=>{const i=x.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(o=>o.length>3).slice(0,2);t.push(...i)});const e=["the","and","for","with","from","this","that","your","our","service","services"],h=[...new Set(t)].filter(x=>!e.includes(x)).slice(0,10);return h.length>0?h.join(", "):null},suggestMetaFields(){},applySuggestedMetaTitle(){this.suggestedMetaTitle&&(this.form.meta_title=this.suggestedMetaTitle)},applySuggestedMetaDescription(){this.suggestedMetaDescription&&(this.form.meta_description=this.suggestedMetaDescription)},applySuggestedMetaKeywords(){this.suggestedMetaKeywords&&(this.form.meta_keywords=this.suggestedMetaKeywords)},getMetaTitleColor(){const t=this.form.meta_title?this.form.meta_title.length:0;return t===0?"primary":t<50?"warning":t>60?"error":"success"},getMetaDescriptionColor(){const t=this.form.meta_description?this.form.meta_description.length:0;return t===0?"primary":t<120?"warning":t>160?"error":"success"},getPreviewTitle(){return this.form.meta_title||this.form.title||"Service Title"},getPreviewDescription(){return this.form.meta_description||this.form.short_description||"Service description will appear here in search results..."},getPreviewUrl(){const t=window.location.origin||"https://example.com",e=this.form.slug||"service-slug";return`${t}/services/${e}`},updateFeaturesFromText(){this.featuresText?this.form.features=this.featuresText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.features=[]},updateBenefitsFromText(){this.benefitsText?this.form.benefits=this.benefitsText.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):this.form.benefits=[]},removeFeature(t){this.form.features.splice(t,1),this.featuresText=this.form.features.join(`
`)},removeBenefit(t){this.form.benefits.splice(t,1),this.benefitsText=this.form.benefits.join(`
`)},async uploadImage(){var e,h,x,i,o,f;if(!this.imageFile)return null;const t=Array.isArray(this.imageFile)?this.imageFile[0]:this.imageFile;if(!t)return null;this.uploadingImage=!0;try{const m=new FormData;m.append("image",t),m.append("folder","services"),this.form.title&&m.append("prefix",this.form.title);const g=await P.post("/api/v1/upload/image",m,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const v=this.normalizeImageInput(g.data.path||g.data.url);return this.form.image=v,this.imagePreview=this.resolveImageUrl(g.data.url||v),this.imageFile=null,this.imageError=null,v}else throw new Error(g.data.message||"Failed to upload image")}catch(m){console.error("Error uploading image:",m),console.error("Error response:",(e=m.response)==null?void 0:e.data);let g="Failed to upload image";if(((h=m.response)==null?void 0:h.status)===422){const v=m.response.data.errors;v&&v.image?g=Array.isArray(v.image)?v.image.join(", "):v.image:m.response.data.message&&(g=m.response.data.message)}else(i=(x=m.response)==null?void 0:x.data)!=null&&i.message?g=m.response.data.message:(f=(o=m.response)==null?void 0:o.data)!=null&&f.error?g=m.response.data.error:m.message&&(g=m.message);throw this.imageError=g,new Error(g)}finally{this.uploadingImage=!1}},async uploadOgImage(){var e,h,x,i,o,f;if(!this.ogImageFile)return null;const t=Array.isArray(this.ogImageFile)?this.ogImageFile[0]:this.ogImageFile;if(!t)return null;this.uploadingOgImage=!0;try{const m=new FormData;m.append("image",t),m.append("folder","services/og"),this.form.title&&m.append("prefix",this.form.title);const g=await P.post("/api/v1/upload/image",m,{headers:{...this.getAuthHeaders(),"Content-Type":"multipart/form-data"}});if(g.data.success){const v=this.normalizeImageInput(g.data.path||g.data.url);return this.form.og_image=v,this.ogImagePreview=this.resolveImageUrl(g.data.url||v),this.ogImageFile=null,this.ogImageError=null,v}else throw new Error(g.data.message||"Failed to upload OG image")}catch(m){console.error("Error uploading OG image:",m),console.error("Error response:",(e=m.response)==null?void 0:e.data);let g="Failed to upload OG image";if(((h=m.response)==null?void 0:h.status)===422){const v=m.response.data.errors;v&&v.image?g=Array.isArray(v.image)?v.image.join(", "):v.image:m.response.data.message&&(g=m.response.data.message)}else(i=(x=m.response)==null?void 0:x.data)!=null&&i.message?g=m.response.data.message:(f=(o=m.response)==null?void 0:o.data)!=null&&f.error?g=m.response.data.error:m.message&&(g=m.message);throw this.ogImageError=g,new Error(g)}finally{this.uploadingOgImage=!1}},async saveService(){this.quillEditor&&(this.form.description=this.quillEditor.root.innerHTML);const{valid:t}=await this.$refs.formRef.validate();if(!t){this.showError("Please fill in all required fields");return}this.updateFeaturesFromText(),this.updateBenefitsFromText(),this.saving=!0;try{if(this.imageFile)try{await this.uploadImage()}catch(h){this.showError(h.message||"Failed to upload image");return}if(this.ogImageFile)try{await this.uploadOgImage()}catch(h){this.showError(h.message||"Failed to upload OG image");return}const e={title:this.form.title,slug:this.form.slug,short_description:this.form.short_description||null,description:this.form.description||null,icon:this.form.icon||null,image:this.normalizeImageInput(this.form.image)||null,price_range:this.form.price_range||null,features:this.form.features.length>0?this.form.features:null,benefits:this.form.benefits.length>0?this.form.benefits:null,meta_title:this.form.meta_title||null,meta_description:this.form.meta_description||null,meta_keywords:this.form.meta_keywords||null,og_image:this.normalizeImageInput(this.form.og_image)||null,published:this.form.published||!1,order:this.form.order||0};this.editingService?(await P.put(`/api/v1/services/${this.editingService.id}`,e,{headers:this.getAuthHeaders()}),this.showSuccess("Service updated successfully")):(await P.post("/api/v1/services",e,{headers:this.getAuthHeaders()}),this.showSuccess("Service created successfully")),this.$emit("saved"),this.closeDialog()}catch(e){this.handleApiError(e,this.editingService?"Failed to update service":"Failed to create service")}finally{this.saving=!1}},normalizeImageInput(t){return Z(t)},resolveImageUrl(t){return Y(t)}}},ee={class:"text-h5 font-weight-bold"},te={key:0,class:"d-flex align-center justify-center pa-12"},ie={class:"text-center"},se={class:"pa-6"},le={class:"pa-6"},re={class:"rich-text-editor-wrapper"},oe={ref:"editorContainer",class:"rich-text-editor"},ne={class:"d-flex flex-column flex-md-row align-start"},ae={key:0,class:"mr-md-4 mb-4 mb-md-0"},de={class:"mt-2"},me={class:"flex-grow-1"},ue={class:"text-body-2"},ce={key:2,class:"text-caption text-medium-emphasis mt-2"},ge={key:0,class:"mt-2"},fe={key:0,class:"mt-2"},pe={class:"pa-6"},he={class:"d-flex align-center justify-space-between"},ve={class:"text-body-2"},_e={key:0,class:"ml-2"},be={key:1,class:"ml-2"},ye={key:2,class:"ml-2 text-success"},we={class:"d-flex align-center justify-space-between flex-wrap"},xe={class:"text-body-2 mb-2"},Se={key:0,class:"ml-2"},ke={key:1,class:"ml-2"},Ie={key:2,class:"ml-2 text-success"},Fe={class:"d-flex align-center justify-space-between flex-wrap"},Ve={class:"text-body-2 mb-2"},Ee={class:"text-caption text-medium-emphasis"},Ce={class:"d-flex flex-column flex-md-row align-start"},De={key:0,class:"mr-md-4 mb-4 mb-md-0"},Te={class:"mt-2"},Pe={class:"flex-grow-1"},Me={class:"text-body-2"},Ue={key:2,class:"text-caption text-medium-emphasis mt-2"},ze={class:"search-preview"},Ae={class:"search-url mb-1 text-caption",style:{color:"#006621"}};function Oe(t,e,h,x,i,o){const f=n("v-btn"),m=n("v-card-title"),g=n("v-progress-circular"),v=n("v-tab"),M=n("v-tabs"),I=n("v-text-field"),S=n("v-col"),w=n("v-textarea"),V=n("v-icon"),D=n("v-switch"),E=n("v-row"),T=n("v-window-item"),C=n("v-label"),U=n("v-img"),p=n("v-file-input"),k=n("v-alert"),z=n("v-card"),L=n("v-chip"),F=n("v-divider"),A=n("v-window"),K=n("v-form"),G=n("v-card-text"),N=n("v-spacer"),W=n("v-card-actions"),Q=n("v-dialog");return a(),y(Q,{modelValue:o.dialog,"onUpdate:modelValue":e[18]||(e[18]=d=>o.dialog=d),"max-width":"1200",scrollable:"",persistent:""},{default:l(()=>[s(z,null,{default:l(()=>[s(m,{class:"d-flex align-center justify-space-between bg-primary text-white pa-4"},{default:l(()=>[r("span",ee,c(h.editingService?"Edit Service":"Create New Service"),1),s(f,{icon:"mdi-close",variant:"text",color:"white",onClick:o.closeDialog,disabled:i.saving||i.loading},null,8,["onClick","disabled"])]),_:1}),s(G,{class:"pa-0"},{default:l(()=>[i.loading?(a(),_("div",te,[r("div",ie,[s(g,{indeterminate:"",color:"primary",size:"64"}),e[19]||(e[19]=r("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service data...",-1))])])):(a(),y(K,{key:1,ref:"formRef"},{default:l(()=>[s(M,{modelValue:i.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>i.activeTab=d),"bg-color":"grey-lighten-4"},{default:l(()=>[s(v,{value:"basic"},{default:l(()=>e[20]||(e[20]=[u("Basic Information")])),_:1,__:[20]}),s(v,{value:"content"},{default:l(()=>e[21]||(e[21]=[u("Content")])),_:1,__:[21]}),s(v,{value:"seo"},{default:l(()=>e[22]||(e[22]=[u("SEO & Meta")])),_:1,__:[22]})]),_:1},8,["modelValue"]),s(A,{modelValue:i.activeTab,"onUpdate:modelValue":e[17]||(e[17]=d=>i.activeTab=d)},{default:l(()=>[s(T,{value:"basic"},{default:l(()=>[r("div",se,[s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(I,{modelValue:i.form.title,"onUpdate:modelValue":e[1]||(e[1]=d=>i.form.title=d),label:"Service Title *",variant:"outlined",rules:[d=>!!d||"Title is required"],hint:"Enter the service title",onBlur:o.generateSlug,"persistent-hint":""},null,8,["modelValue","rules","onBlur"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(I,{modelValue:i.form.slug,"onUpdate:modelValue":e[2]||(e[2]=d=>i.form.slug=d),label:"Slug *",variant:"outlined",rules:[d=>!!d||"Slug is required",d=>!d||/^[a-z0-9-]+$/.test(d)||"Slug can only contain lowercase letters, numbers, and hyphens"],hint:"URL-friendly version (auto-generated from title)","persistent-hint":""},{append:l(()=>[s(f,{icon:"mdi-refresh",size:"small",variant:"text",onClick:o.generateSlug,disabled:!i.form.title},null,8,["onClick","disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(I,{modelValue:i.form.order,"onUpdate:modelValue":e[3]||(e[3]=d=>i.form.order=d),label:"Order",type:"number",variant:"outlined",hint:"Display order (lower numbers first)","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(w,{modelValue:i.form.short_description,"onUpdate:modelValue":e[4]||(e[4]=d=>i.form.short_description=d),label:"Short Description",variant:"outlined",rows:"3",hint:"Brief description shown in service listings","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(I,{modelValue:i.form.icon,"onUpdate:modelValue":e[5]||(e[5]=d=>i.form.icon=d),label:"Icon",variant:"outlined",hint:"Material Design Icon name (e.g., mdi-battery-charging-high)","persistent-hint":"","prepend-inner-icon":"mdi-information-outline"},{append:l(()=>[i.form.icon?(a(),y(V,{key:0,icon:i.form.icon,size:"small"},null,8,["icon"])):b("",!0)]),_:1},8,["modelValue"])]),_:1}),s(S,{cols:"12",md:"6"},{default:l(()=>[s(I,{modelValue:i.form.price_range,"onUpdate:modelValue":e[6]||(e[6]=d=>i.form.price_range=d),label:"Price Range",variant:"outlined",hint:"e.g., $100 - $500","persistent-hint":""},null,8,["modelValue"])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(D,{modelValue:i.form.published,"onUpdate:modelValue":e[7]||(e[7]=d=>i.form.published=d),label:"Published",color:"success",hint:"Publish this service on the public website","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s(T,{value:"content"},{default:l(()=>[r("div",le,[s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[23]||(e[23]=[u("Full Description")])),_:1,__:[23]}),r("div",re,[r("div",oe,null,512)])]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[24]||(e[24]=[u("Service Image")])),_:1,__:[24]}),s(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[r("div",ne,[i.imagePreview||i.form.image?(a(),_("div",ae,[s(U,{src:i.imagePreview||o.resolveImageUrl(i.form.image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),r("div",de,[s(f,{color:"error",size:"small",variant:"text",onClick:o.removeImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[25]||(e[25]=[u(" Remove Image ")])),_:1,__:[25]},8,["onClick"])])])):b("",!0),r("div",me,[s(p,{modelValue:i.imageFile,"onUpdate:modelValue":[e[8]||(e[8]=d=>i.imageFile=d),o.handleImageSelect],accept:"image/*",label:"Select Service Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x800px or larger. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingImage?(a(),y(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.imageFile&&i.imageFile.size>5242880?(a(),y(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[26]||(e[26]=[u(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[26]})):b("",!0),i.imageError?(a(),y(k,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[9]||(e[9]=d=>i.imageError=null)},{default:l(()=>[r("div",ue,[e[27]||(e[27]=r("strong",null,"Upload Error:",-1)),u(" "+c(i.imageError),1)])]),_:1})):b("",!0),!i.imagePreview&&!i.imageFile?(a(),_("div",ce," No image selected. Upload an image to display with this service. ")):b("",!0)])])]),_:1})]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[28]||(e[28]=[u("Features")])),_:1,__:[28]}),s(w,{modelValue:i.featuresText,"onUpdate:modelValue":e[10]||(e[10]=d=>i.featuresText=d),variant:"outlined",rows:"4",hint:"Enter one feature per line","persistent-hint":"",onBlur:o.updateFeaturesFromText},null,8,["modelValue","onBlur"]),i.form.features&&i.form.features.length>0?(a(),_("div",ge,[(a(!0),_(B,null,q(i.form.features,(d,O)=>(a(),y(L,{key:O,class:"ma-1",closable:"","onClick:close":J=>o.removeFeature(O)},{default:l(()=>[u(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[29]||(e[29]=[u("Benefits")])),_:1,__:[29]}),s(w,{modelValue:i.benefitsText,"onUpdate:modelValue":e[11]||(e[11]=d=>i.benefitsText=d),variant:"outlined",rows:"4",hint:"Enter one benefit per line","persistent-hint":"",onBlur:o.updateBenefitsFromText},null,8,["modelValue","onBlur"]),i.form.benefits&&i.form.benefits.length>0?(a(),_("div",fe,[(a(!0),_(B,null,q(i.form.benefits,(d,O)=>(a(),y(L,{key:O,class:"ma-1",closable:"","onClick:close":J=>o.removeBenefit(O),color:"success",variant:"flat"},{default:l(()=>[u(c(d),1)]),_:2},1032,["onClick:close"]))),128))])):b("",!0)]),_:1})]),_:1})])]),_:1}),s(T,{value:"seo"},{default:l(()=>[r("div",pe,[s(k,{type:"info",variant:"tonal",class:"mb-6",density:"compact"},{default:l(()=>e[30]||(e[30]=[r("div",{class:"text-body-2"},[r("strong",null,"SEO Best Practices:"),u(" Fill in these fields to improve your service visibility in search engines and social media. If left empty, default values from the service title and description will be used. ")],-1)])),_:1,__:[30]}),s(E,null,{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[s(I,{modelValue:i.form.meta_title,"onUpdate:modelValue":e[12]||(e[12]=d=>i.form.meta_title=d),label:"Meta Title",variant:"outlined",hint:"SEO title for search engines (recommended: 50-60 characters)","persistent-hint":"",counter:60,color:o.getMetaTitleColor(),"prepend-inner-icon":"mdi-format-title"},{append:l(()=>[s(f,{icon:"mdi-refresh",size:"small",variant:"text",onClick:o.generateMetaTitle,disabled:!i.form.title,title:"Auto-generate from service title"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_title&&o.suggestedMetaTitle?(a(),y(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[r("div",he,[r("span",ve,[e[31]||(e[31]=r("strong",null,"Suggested:",-1)),u(" "+c(o.suggestedMetaTitle),1)]),s(f,{size:"small",color:"primary",variant:"text",onClick:o.applySuggestedMetaTitle,class:"ml-2"},{default:l(()=>e[32]||(e[32]=[u(" Apply ")])),_:1,__:[32]},8,["onClick"])])]),_:1})):b("",!0),r("div",{class:j(["text-caption",o.getMetaTitleColor()+"--text"])},[u(c(i.form.meta_title.length)+"/60 characters ",1),i.form.meta_title.length<50?(a(),_("span",_e," (Too short - recommended: 50-60) ")):i.form.meta_title.length>60?(a(),_("span",be," (Too long - may be truncated) ")):(a(),_("span",ye,"✓ Good length"))],2)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(w,{modelValue:i.form.meta_description,"onUpdate:modelValue":e[13]||(e[13]=d=>i.form.meta_description=d),label:"Meta Description",variant:"outlined",rows:"4",hint:"SEO description for search results (recommended: 150-160 characters)","persistent-hint":"",counter:160,color:o.getMetaDescriptionColor(),"prepend-inner-icon":"mdi-text"},{append:l(()=>[s(f,{icon:"mdi-refresh",size:"small",variant:"text",onClick:o.generateMetaDescription,disabled:!i.form.short_description,title:"Auto-generate from short description"},null,8,["onClick","disabled"])]),_:1},8,["modelValue","color"]),!i.form.meta_description&&o.suggestedMetaDescription?(a(),y(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[r("div",we,[r("span",xe,[e[33]||(e[33]=r("strong",null,"Suggested:",-1)),u(" "+c(o.suggestedMetaDescription),1)]),s(f,{size:"small",color:"primary",variant:"text",onClick:o.applySuggestedMetaDescription},{default:l(()=>e[34]||(e[34]=[u(" Apply ")])),_:1,__:[34]},8,["onClick"])])]),_:1})):b("",!0),r("div",{class:j(["text-caption",o.getMetaDescriptionColor()+"--text"])},[u(c(i.form.meta_description.length)+"/160 characters ",1),i.form.meta_description.length<120?(a(),_("span",Se," (Too short - recommended: 150-160) ")):i.form.meta_description.length>160?(a(),_("span",ke," (Too long - may be truncated) ")):(a(),_("span",Ie,"✓ Good length"))],2)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(I,{modelValue:i.form.meta_keywords,"onUpdate:modelValue":e[14]||(e[14]=d=>i.form.meta_keywords=d),label:"Meta Keywords",variant:"outlined",hint:"Comma-separated keywords for SEO (e.g., power backup, UPS systems, battery)","persistent-hint":"","prepend-inner-icon":"mdi-tag-multiple"},{append:l(()=>[s(f,{icon:"mdi-auto-fix",size:"small",variant:"text",onClick:o.generateMetaKeywords,disabled:!i.form.title&&!i.form.short_description&&i.form.features.length===0,title:"Auto-generate from title, description, and features"},null,8,["onClick","disabled"])]),_:1},8,["modelValue"]),!i.form.meta_keywords&&o.suggestedMetaKeywords?(a(),y(k,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2",closable:""},{default:l(()=>[r("div",Fe,[r("span",Ve,[e[35]||(e[35]=r("strong",null,"Suggested:",-1)),u(" "+c(o.suggestedMetaKeywords),1)]),s(f,{size:"small",color:"primary",variant:"text",onClick:o.applySuggestedMetaKeywords},{default:l(()=>e[36]||(e[36]=[u(" Apply ")])),_:1,__:[36]},8,["onClick"])])]),_:1})):b("",!0),r("div",Ee,c((i.form.meta_keywords||"").split(",").filter(d=>d.trim()).length)+" keywords entered ",1)]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(F,{class:"my-4"}),e[37]||(e[37]=r("h3",{class:"text-h6 font-weight-bold mb-4"},"Open Graph (Social Media)",-1)),e[38]||(e[38]=r("p",{class:"text-body-2 text-medium-emphasis mb-4"}," This image will be displayed when your service is shared on social media platforms like Facebook, Twitter, LinkedIn, etc. ",-1))]),_:1,__:[37,38]}),s(S,{cols:"12"},{default:l(()=>[s(C,{class:"mb-2"},{default:l(()=>e[39]||(e[39]=[u("Open Graph Image")])),_:1,__:[39]}),s(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[r("div",Ce,[i.ogImagePreview||i.form.og_image?(a(),_("div",De,[s(U,{src:i.ogImagePreview||o.resolveImageUrl(i.form.og_image),"max-width":"300","max-height":"300",class:"rounded elevation-2",cover:""},null,8,["src"]),r("div",Te,[s(f,{color:"error",size:"small",variant:"text",onClick:o.removeOgImage,"prepend-icon":"mdi-delete"},{default:l(()=>e[40]||(e[40]=[u(" Remove Image ")])),_:1,__:[40]},8,["onClick"])]),e[41]||(e[41]=r("div",{class:"text-caption text-medium-emphasis mt-2"}," Recommended: 1200x630px (1.91:1 ratio) ",-1))])):b("",!0),r("div",Pe,[s(p,{modelValue:i.ogImageFile,"onUpdate:modelValue":[e[15]||(e[15]=d=>i.ogImageFile=d),o.handleOgImageSelect],accept:"image/*",label:"Select Open Graph Image",variant:"outlined","prepend-icon":"","prepend-inner-icon":"mdi-image","show-size":"",clearable:"",hint:"Recommended size: 1200x630px. Max file size: 5MB","persistent-hint":""},{append:l(()=>[i.uploadingOgImage?(a(),y(g,{key:0,indeterminate:"",color:"primary",size:"24"})):b("",!0)]),_:1},8,["modelValue","onUpdate:modelValue"]),i.ogImageFile&&i.ogImageFile.size>5242880?(a(),y(k,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>e[42]||(e[42]=[u(" File size is larger than 5MB. Please choose a smaller image. ")])),_:1,__:[42]})):b("",!0),i.ogImageError?(a(),y(k,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-2",closable:"","onClick:close":e[16]||(e[16]=d=>i.ogImageError=null)},{default:l(()=>[r("div",Me,[e[43]||(e[43]=r("strong",null,"Upload Error:",-1)),u(" "+c(i.ogImageError),1)])]),_:1})):b("",!0),!i.ogImagePreview&&!i.ogImageFile?(a(),_("div",Ue," No image selected. If not provided, the service image will be used. ")):b("",!0)])])]),_:1})]),_:1}),s(S,{cols:"12"},{default:l(()=>[s(F,{class:"my-4"}),e[44]||(e[44]=r("h3",{class:"text-h6 font-weight-bold mb-4"},"Search Engine Preview",-1)),s(z,{variant:"outlined",class:"pa-4"},{default:l(()=>[r("div",ze,[r("div",Ae,c(o.getPreviewUrl()),1),r("div",{class:j(["search-title mb-1 text-h6",o.getMetaTitleColor()+"--text"]),style:{color:"#1a0dab",cursor:"pointer"}},c(o.getPreviewTitle()),3),r("div",{class:j(["search-description text-body-2",o.getMetaDescriptionColor()+"--text"]),style:{color:"#545454"}},c(o.getPreviewDescription()),3)])]),_:1})]),_:1,__:[44]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1},512))]),_:1}),s(W,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[s(N),s(f,{variant:"text",onClick:o.closeDialog,disabled:i.saving},{default:l(()=>e[45]||(e[45]=[u("Cancel")])),_:1,__:[45]},8,["onClick","disabled"]),s(f,{color:"primary",variant:"flat",onClick:o.saveService,loading:i.saving},{default:l(()=>[u(c(h.editingService?"Update":"Create")+" Service ",1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Be=H($,[["render",Oe],["__scopeId","data-v-140a9ea2"]]),qe={name:"ServiceDetailsDialog",props:{modelValue:{type:Boolean,default:!1},serviceId:{type:[Number,String],default:null}},emits:["update:modelValue","edit"],data(){return{loading:!1,service:null,tab:"basic"}},computed:{dialog:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},watch:{modelValue(t){t&&this.serviceId&&this.loadService()},serviceId(){this.dialog&&this.serviceId&&this.loadService()}},methods:{async loadService(){if(this.serviceId){this.loading=!0,this.service=null,this.tab="basic";try{const e=(await P.get(`/api/v1/services/${this.serviceId}`,{headers:this.getAuthHeaders()})).data;if(!e)throw new Error("No service data received");this.service=e}catch(t){console.error("Failed to load service details:",t),alert("Failed to load service details. Please try again."),this.closeDialog()}finally{this.loading=!1}}},closeDialog(){this.dialog=!1,this.service=null,this.tab="basic"},handleEdit(){this.service&&(this.$emit("edit",this.service),this.closeDialog())},getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}},formatDateTime(t){return t?new Date(t).toLocaleString():"-"}}},Le={class:"d-flex align-center"},je={key:0,class:"d-flex align-center justify-center pa-12"},He={class:"text-center"},Re={key:1},Ke={class:"text-h6 font-weight-bold mb-4"},Ge={class:"text-body-1 mb-4"},Ne={class:"text-body-1 mb-4"},We={class:"text-body-1 mb-4"},Qe={class:"text-body-1 mb-4"},Je={key:1,class:"text-grey"},Xe={class:"text-body-1 mb-4"},Ye={class:"mb-4"},Ze={class:"mb-4"},$e={class:"mb-4"},et={class:"text-body-1 mb-4"},tt={class:"text-body-1 mb-4"},it=["innerHTML"],st={class:"text-body-1 mb-4"},lt={class:"text-body-1 mb-4"},rt={class:"text-body-1 mb-4"};function ot(t,e,h,x,i,o){const f=n("v-icon"),m=n("v-btn"),g=n("v-card-title"),v=n("v-progress-circular"),M=n("v-tab"),I=n("v-tabs"),S=n("v-divider"),w=n("v-col"),V=n("v-chip"),D=n("v-row"),E=n("v-window-item"),T=n("v-img"),C=n("v-window"),U=n("v-card-text"),p=n("v-spacer"),k=n("v-card-actions"),z=n("v-card"),L=n("v-dialog");return a(),y(L,{modelValue:o.dialog,"onUpdate:modelValue":e[2]||(e[2]=F=>o.dialog=F),"max-width":"1200",scrollable:""},{default:l(()=>[s(z,null,{default:l(()=>[s(g,{class:"d-flex align-center justify-space-between bg-info text-white pa-4"},{default:l(()=>[r("div",Le,[s(f,{icon:"mdi-eye",class:"mr-3"}),e[3]||(e[3]=r("span",{class:"text-h5 font-weight-bold"},"Service Details",-1))]),s(m,{icon:"mdi-close",variant:"text",color:"white",onClick:o.closeDialog,disabled:i.loading},null,8,["onClick","disabled"])]),_:1}),s(U,{class:"pa-0"},{default:l(()=>[i.loading?(a(),_("div",je,[r("div",He,[s(v,{indeterminate:"",color:"info",size:"64"}),e[4]||(e[4]=r("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading service details...",-1))])])):i.service?(a(),_("div",Re,[s(I,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=F=>i.tab=F),color:"info","bg-color":"grey-lighten-4"},{default:l(()=>[s(M,{value:"basic"},{default:l(()=>[s(f,{icon:"mdi-information",class:"mr-2"}),e[5]||(e[5]=u(" Basic Info "))]),_:1,__:[5]}),s(M,{value:"content"},{default:l(()=>[s(f,{icon:"mdi-text",class:"mr-2"}),e[6]||(e[6]=u(" Content "))]),_:1,__:[6]}),s(M,{value:"seo"},{default:l(()=>[s(f,{icon:"mdi-search-web",class:"mr-2"}),e[7]||(e[7]=u(" SEO & Meta "))]),_:1,__:[7]})]),_:1},8,["modelValue"]),s(S),s(C,{modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=F=>i.tab=F),class:"pa-6"},{default:l(()=>[s(E,{value:"basic"},{default:l(()=>[s(D,null,{default:l(()=>[s(w,{cols:"12"},{default:l(()=>[e[8]||(e[8]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Title",-1)),r("div",Ke,c(i.service.title||"-"),1)]),_:1,__:[8]}),s(w,{cols:"12",md:"6"},{default:l(()=>[e[9]||(e[9]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Slug",-1)),r("div",Ge,[s(V,{size:"small",variant:"outlined"},{default:l(()=>[u(c(i.service.slug||"-"),1)]),_:1})])]),_:1,__:[9]}),s(w,{cols:"12",md:"6"},{default:l(()=>[e[10]||(e[10]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Order",-1)),r("div",Ne,c(i.service.order||0),1)]),_:1,__:[10]}),s(w,{cols:"12"},{default:l(()=>[e[11]||(e[11]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Short Description",-1)),r("div",We,c(i.service.short_description||"-"),1)]),_:1,__:[11]}),s(w,{cols:"12",md:"6"},{default:l(()=>[e[12]||(e[12]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Icon",-1)),r("div",Qe,[i.service.icon?(a(),y(f,{key:0,icon:i.service.icon,size:"large"},null,8,["icon"])):(a(),_("span",Je,"-"))])]),_:1,__:[12]}),s(w,{cols:"12",md:"6"},{default:l(()=>[e[13]||(e[13]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Price Range",-1)),r("div",Xe,c(i.service.price_range||"-"),1)]),_:1,__:[13]}),s(w,{cols:"12"},{default:l(()=>[e[14]||(e[14]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Status",-1)),r("div",Ye,[s(V,{color:i.service.published?"success":"error",size:"small"},{default:l(()=>[u(c(i.service.published?"Published":"Draft"),1)]),_:1},8,["color"])])]),_:1,__:[14]}),i.service.features&&i.service.features.length>0?(a(),y(w,{key:0,cols:"12"},{default:l(()=>[e[15]||(e[15]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Features",-1)),r("div",Ze,[(a(!0),_(B,null,q(i.service.features,(F,A)=>(a(),y(V,{key:A,class:"ma-1",size:"small",color:"primary",variant:"flat"},{default:l(()=>[u(c(F),1)]),_:2},1024))),128))])]),_:1,__:[15]})):b("",!0),i.service.benefits&&i.service.benefits.length>0?(a(),y(w,{key:1,cols:"12"},{default:l(()=>[e[16]||(e[16]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Benefits",-1)),r("div",$e,[(a(!0),_(B,null,q(i.service.benefits,(F,A)=>(a(),y(V,{key:A,class:"ma-1",size:"small",color:"success",variant:"flat"},{default:l(()=>[u(c(F),1)]),_:2},1024))),128))])]),_:1,__:[16]})):b("",!0),i.service.created_at?(a(),y(w,{key:2,cols:"12"},{default:l(()=>[e[17]||(e[17]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Created At",-1)),r("div",et,c(o.formatDateTime(i.service.created_at)),1)]),_:1,__:[17]})):b("",!0),i.service.updated_at?(a(),y(w,{key:3,cols:"12"},{default:l(()=>[e[18]||(e[18]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Updated At",-1)),r("div",tt,c(o.formatDateTime(i.service.updated_at)),1)]),_:1,__:[18]})):b("",!0)]),_:1})]),_:1}),s(E,{value:"content"},{default:l(()=>[s(D,null,{default:l(()=>[i.service.image?(a(),y(w,{key:0,cols:"12"},{default:l(()=>[e[19]||(e[19]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Service Image",-1)),s(T,{src:i.service.image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[19]})):b("",!0),s(w,{cols:"12"},{default:l(()=>[e[20]||(e[20]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Full Description",-1)),r("div",{class:"text-body-1",innerHTML:i.service.description||"-"},null,8,it)]),_:1,__:[20]})]),_:1})]),_:1}),s(E,{value:"seo"},{default:l(()=>[s(D,null,{default:l(()=>[s(w,{cols:"12"},{default:l(()=>[e[21]||(e[21]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Title",-1)),r("div",st,c(i.service.meta_title||"-"),1)]),_:1,__:[21]}),s(w,{cols:"12"},{default:l(()=>[e[22]||(e[22]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Description",-1)),r("div",lt,c(i.service.meta_description||"-"),1)]),_:1,__:[22]}),s(w,{cols:"12"},{default:l(()=>[e[23]||(e[23]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Meta Keywords",-1)),r("div",rt,c(i.service.meta_keywords||"-"),1)]),_:1,__:[23]}),i.service.og_image?(a(),y(w,{key:0,cols:"12"},{default:l(()=>[e[24]||(e[24]=r("div",{class:"text-subtitle-1 text-medium-emphasis mb-2"},"Open Graph Image",-1)),s(T,{src:i.service.og_image,"max-width":"600","max-height":"400",class:"rounded elevation-2 mb-4",cover:""},null,8,["src"])]),_:1,__:[24]})):b("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):b("",!0)]),_:1}),s(k,{class:"pa-4 bg-grey-lighten-5"},{default:l(()=>[s(p),s(m,{color:"primary","prepend-icon":"mdi-pencil",onClick:o.handleEdit},{default:l(()=>e[25]||(e[25]=[u(" Edit Service ")])),_:1,__:[25]},8,["onClick"]),s(m,{color:"grey",variant:"text",onClick:o.closeDialog},{default:l(()=>e[26]||(e[26]=[u("Close")])),_:1,__:[26]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const nt=H(qe,[["render",ot]]),at={components:{ServiceFormDialog:Be,ServiceDetailsDialog:nt},mixins:[R],data(){return{services:[],showDialog:!1,editingService:null,showDetailsDialog:!1,selectedServiceId:null,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadServices()},methods:{async loadServices(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await P.get("/api/v1/services",{params:t,headers:this.getAuthHeaders()});this.services=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load services")}finally{this.loading=!1}},openDialog(t=null){this.editingService=t,this.showDialog=!0},editService(t){this.openDialog(t)},viewService(t){this.selectedServiceId=t.id,this.showDetailsDialog=!0},handleEditFromDetails(t){this.showDetailsDialog=!1,this.$nextTick(()=>{this.openDialog(t)})},handleServiceSaved(){this.loadServices()},async deleteService(t){if(confirm("Are you sure you want to delete this service?"))try{await P.delete(`/api/v1/services/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Service deleted successfully"),await this.loadServices()}catch(e){this.handleApiError(e,"Error deleting service")}},onPerPageChange(){this.resetPagination(),this.loadServices()},onSort(t){this.handleSort(t),this.loadServices()}}},dt={class:"page-header"},mt={class:"text-caption text-grey"},ut={key:0},ct={class:"d-flex align-center"},gt={class:"d-flex align-center"},ft={class:"d-flex align-center"},pt={key:0},ht={class:"d-flex justify-space-between align-center mt-4"},vt={class:"text-caption text-grey"},_t={key:0},bt={key:1};function yt(t,e,h,x,i,o){const f=n("v-btn"),m=n("v-select"),g=n("v-col"),v=n("v-text-field"),M=n("v-row"),I=n("v-card-text"),S=n("v-card"),w=n("v-card-title"),V=n("v-icon"),D=n("v-chip"),E=n("v-table"),T=n("v-pagination"),C=n("ServiceFormDialog"),U=n("ServiceDetailsDialog");return a(),_("div",null,[r("div",dt,[e[11]||(e[11]=r("h1",{class:"text-h4 page-title"},"Services Management",-1)),s(f,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=p=>o.openDialog()),class:"add-button"},{default:l(()=>e[10]||(e[10]=[u("Create Service")])),_:1,__:[10]})]),s(S,{class:"mb-4"},{default:l(()=>[s(I,null,{default:l(()=>[s(M,null,{default:l(()=>[s(g,{cols:"12",md:"4"},{default:l(()=>[s(m,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=p=>t.perPage=p),o.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(g,{cols:"12",md:"4"},{default:l(()=>[s(m,{modelValue:i.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=p=>i.publishedFilter=p),o.loadServices],items:i.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),s(g,{cols:"12",md:"4"},{default:l(()=>[s(v,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=p=>t.search=p),o.loadServices],label:"Search services","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(S,null,{default:l(()=>[s(w,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[13]||(e[13]=r("span",null,"Services",-1)),r("span",mt,[e[12]||(e[12]=u(" Total Records: ")),r("strong",null,c(t.pagination.total||0),1),i.services.length>0?(a(),_("span",ut," | Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total),1)):b("",!0)])]),_:1,__:[13]}),s(I,null,{default:l(()=>[s(E,null,{default:l(()=>[r("thead",null,[r("tr",null,[r("th",{class:"sortable",onClick:e[4]||(e[4]=p=>o.onSort("title"))},[r("div",ct,[e[14]||(e[14]=u(" Title ")),s(V,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),r("th",{class:"sortable",onClick:e[5]||(e[5]=p=>o.onSort("slug"))},[r("div",gt,[e[15]||(e[15]=u(" Slug ")),s(V,{icon:t.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),r("th",{class:"sortable",onClick:e[6]||(e[6]=p=>o.onSort("published"))},[r("div",ft,[e[16]||(e[16]=u(" Published ")),s(V,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[17]||(e[17]=r("th",null,"Actions",-1))])]),r("tbody",null,[(a(!0),_(B,null,q(i.services,p=>(a(),_("tr",{key:p.id},[r("td",null,c(p.title),1),r("td",null,[s(D,{size:"small",variant:"outlined"},{default:l(()=>[u(c(p.slug),1)]),_:2},1024)]),r("td",null,[s(D,{color:p.published?"success":"error",size:"small"},{default:l(()=>[u(c(p.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),r("td",null,[s(f,{size:"small",icon:"mdi-eye",onClick:k=>o.viewService(p),variant:"text",color:"info",title:"View Service"},null,8,["onClick"]),s(f,{size:"small",icon:"mdi-pencil",onClick:k=>o.editService(p),variant:"text",title:"Edit Service"},null,8,["onClick"]),s(f,{size:"small",icon:"mdi-delete",onClick:k=>o.deleteService(p.id),variant:"text",color:"error",title:"Delete Service"},null,8,["onClick"])])]))),128)),i.services.length===0?(a(),_("tr",pt,e[18]||(e[18]=[r("td",{colspan:"4",class:"text-center py-4"},"No services found",-1)]))):b("",!0)])]),_:1}),r("div",ht,[r("div",vt,[i.services.length>0?(a(),_("span",_t," Showing "+c((t.currentPage-1)*t.perPage+1)+" to "+c(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+c(t.pagination.total)+" records ",1)):(a(),_("span",bt," No records found "))]),t.pagination.last_page>1?(a(),y(T,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=p=>t.currentPage=p),o.loadServices],length:t.pagination.last_page},null,8,["modelValue","length","onUpdate:modelValue"])):b("",!0)])]),_:1})]),_:1}),s(C,{modelValue:i.showDialog,"onUpdate:modelValue":e[8]||(e[8]=p=>i.showDialog=p),"editing-service":i.editingService,onSaved:o.handleServiceSaved},null,8,["modelValue","editing-service","onSaved"]),s(U,{modelValue:i.showDetailsDialog,"onUpdate:modelValue":e[9]||(e[9]=p=>i.showDetailsDialog=p),"service-id":i.selectedServiceId,onEdit:o.handleEditFromDetails},null,8,["modelValue","service-id","onEdit"])])}const It=H(at,[["render",yt]]);export{It as default};
