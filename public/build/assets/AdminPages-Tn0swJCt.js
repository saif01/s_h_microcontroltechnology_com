import{_ as U,d as p,a as l,b as n,w as s,f as g,r as o,g as f,t as i,F as z,e as A,c as N,h as _,o as u}from"./app-DEFCgX4U.js";import{a as D}from"./adminPaginationMixin-DN7Wb3ng.js";const E={mixins:[D],data(){return{pages:[],showDialog:!1,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadPages()},methods:{async loadPages(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await _.get("/api/v1/pages",{params:t,headers:this.getAuthHeaders()});this.pages=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load pages")}finally{this.loading=!1}},onSort(t){this.handleSort(t),this.loadPages()},editPage(t){alert("Edit functionality coming soon")},async deletePage(t){if(confirm("Are you sure you want to delete this page?"))try{await _.delete(`/api/v1/pages/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Page deleted successfully"),await this.loadPages()}catch(e){this.handleApiError(e,"Error deleting page")}}}},B={class:"page-header"},I={class:"text-caption text-grey"},M={key:0},T={class:"d-flex align-center"},O={class:"d-flex align-center"},j={class:"d-flex align-center"},H={key:0},L={class:"d-flex justify-space-between align-center mt-4"},R={class:"text-caption text-grey"},q={key:0},G={key:1};function J(t,e,K,Q,r,d){const m=o("v-btn"),v=o("v-select"),c=o("v-col"),V=o("v-text-field"),k=o("v-row"),P=o("v-card-text"),b=o("v-card"),w=o("v-card-title"),h=o("v-icon"),y=o("v-chip"),S=o("v-table"),C=o("v-pagination");return u(),p("div",null,[l("div",B,[e[9]||(e[9]=l("h1",{class:"text-h4 page-title"},"Pages Management",-1)),n(m,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=a=>r.showDialog=!0),class:"add-button"},{default:s(()=>e[8]||(e[8]=[g("Create Page")])),_:1,__:[8]})]),n(b,{class:"mb-4"},{default:s(()=>[n(P,null,{default:s(()=>[n(k,null,{default:s(()=>[n(c,{cols:"12",md:"4"},{default:s(()=>[n(v,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=a=>t.perPage=a),t.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(c,{cols:"12",md:"4"},{default:s(()=>[n(v,{modelValue:r.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=a=>r.publishedFilter=a),d.loadPages],items:r.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(c,{cols:"12",md:"4"},{default:s(()=>[n(V,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=a=>t.search=a),d.loadPages],label:"Search pages","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),n(b,null,{default:s(()=>[n(w,{class:"d-flex justify-space-between align-center"},{default:s(()=>[e[11]||(e[11]=l("span",null,"Pages",-1)),l("span",I,[e[10]||(e[10]=g(" Total Records: ")),l("strong",null,i(t.pagination.total||0),1),r.pages.length>0?(u(),p("span",M," | Showing "+i((t.currentPage-1)*t.perPage+1)+" to "+i(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+i(t.pagination.total),1)):f("",!0)])]),_:1,__:[11]}),n(P,null,{default:s(()=>[n(S,null,{default:s(()=>[l("thead",null,[l("tr",null,[l("th",{class:"sortable",onClick:e[4]||(e[4]=a=>d.onSort("title"))},[l("div",T,[e[12]||(e[12]=g(" Title ")),n(h,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),l("th",{class:"sortable",onClick:e[5]||(e[5]=a=>d.onSort("slug"))},[l("div",O,[e[13]||(e[13]=g(" Slug ")),n(h,{icon:t.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[15]||(e[15]=l("th",null,"Type",-1)),l("th",{class:"sortable",onClick:e[6]||(e[6]=a=>d.onSort("published"))},[l("div",j,[e[14]||(e[14]=g(" Published ")),n(h,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[16]||(e[16]=l("th",null,"Actions",-1))])]),l("tbody",null,[(u(!0),p(z,null,A(r.pages,a=>(u(),p("tr",{key:a.id},[l("td",null,i(a.title),1),l("td",null,[n(y,{size:"small",variant:"outlined"},{default:s(()=>[g(i(a.slug),1)]),_:2},1024)]),l("td",null,i(a.page_type||"-"),1),l("td",null,[n(y,{color:a.published?"success":"error",size:"small"},{default:s(()=>[g(i(a.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),l("td",null,[n(m,{size:"small",icon:"mdi-pencil",onClick:F=>d.editPage(a),variant:"text"},null,8,["onClick"]),n(m,{size:"small",icon:"mdi-delete",onClick:F=>d.deletePage(a.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),r.pages.length===0?(u(),p("tr",H,e[17]||(e[17]=[l("td",{colspan:"5",class:"text-center py-4"},"No pages found",-1)]))):f("",!0)])]),_:1}),l("div",L,[l("div",R,[r.pages.length>0?(u(),p("span",q," Showing "+i((t.currentPage-1)*t.perPage+1)+" to "+i(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+i(t.pagination.total)+" records ",1)):(u(),p("span",G," No records found "))]),t.pagination.last_page>1?(u(),N(C,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=a=>t.currentPage=a),d.loadPages],length:t.pagination.last_page},null,8,["modelValue","length","onUpdate:modelValue"])):f("",!0)])]),_:1})]),_:1})])}const Y=U(E,[["render",J]]);export{Y as default};
