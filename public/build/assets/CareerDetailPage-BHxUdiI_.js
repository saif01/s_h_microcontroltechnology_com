import{_ as P,d as w,b as i,a,r as l,w as r,t as y,c as u,h as v,f as c,n as S,g as D,o as s}from"./app-lR99xEE4.js";const H={name:"CareerDetailPage",data(){return{career:null,loading:!0,submitting:!1,applicationForm:{name:"",email:"",phone:"",cover_letter:"",resume:null}}},mounted(){this.loadCareer()},watch:{$route(){this.loadCareer()}},methods:{async loadCareer(){var p;try{this.loading=!0,this.career=null;const e=this.$route.params.slug,_=await D.get(`/api/openapi/careers/${e}`),f=((p=_.data)==null?void 0:p.data)||_.data;f?this.career=f:(console.warn("No career data received"),this.career=null)}catch(e){console.error("Error loading career:",e),console.error("Error response:",e.response),this.career=null}finally{this.loading=!1}},async submitApplication(){var e,_,f,t;const{valid:p}=await this.$refs.applicationForm.validate();if(p){if(!this.career||!this.career.is_active){alert("This position is no longer accepting applications.");return}this.submitting=!0;try{const n=new FormData;n.append("career_id",this.career.id),n.append("name",this.applicationForm.name),n.append("email",this.applicationForm.email),n.append("phone",this.applicationForm.phone||""),n.append("cover_letter",this.applicationForm.cover_letter||""),this.applicationForm.resume&&n.append("resume",this.applicationForm.resume);const d=await D.post("/api/openapi/careers/apply",n,{headers:{"Content-Type":"multipart/form-data"}});d.data.success&&(window.Swal?window.Swal.fire({icon:"success",title:"Application Submitted!",text:d.data.message||"Your application has been submitted successfully.",confirmButtonText:"OK"}).then(()=>{this.applicationForm={name:"",email:"",phone:"",cover_letter:"",resume:null},this.$refs.applicationForm.resetValidation()}):(alert(d.data.message||"Application submitted successfully!"),this.applicationForm={name:"",email:"",phone:"",cover_letter:"",resume:null},this.$refs.applicationForm.resetValidation()))}catch(n){console.error("Error submitting application:",n);let d="Failed to submit application. Please try again.";if((_=(e=n.response)==null?void 0:e.data)!=null&&_.message)d=n.response.data.message;else if((t=(f=n.response)==null?void 0:f.data)!=null&&t.errors){const m=n.response.data.errors;d=Object.values(m).flat().join(", ")}window.Swal?window.Swal.fire({icon:"error",title:"Application Failed",text:d}):alert(d)}finally{this.submitting=!1}}},formatDate(p){return p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"},validateBangladeshPhone(p){if(!p)return!0;const e=p.replace(/[\s\-\(\)]/g,""),_=/^01[3-9]\d{8}$/,f=/^\+8801[3-9]\d{8}$/;return _.test(e)||f.test(e)}}},N={class:"career-detail-page"},E={key:0,class:"text-center py-16"},U={key:1},q={class:"mb-10 page-hero position-relative d-flex align-center justify-center text-center overflow-hidden"},j={class:"text-h4 text-lg-h2 font-weight-black text-white mb-4 text-shadow-sm"},O={class:"d-flex flex-wrap justify-center gap-4"},R={class:"text-capitalize"},I={class:"py-12"},J=["innerHTML"],K=["innerHTML"],X=["innerHTML"],Y=["innerHTML"],G={class:"text-caption"},Q={key:2,class:"text-center py-16"};function W(p,e,_,f,t,n){const d=l("v-progress-circular"),m=l("v-icon"),x=l("v-chip"),z=l("v-fade-transition"),V=l("v-container"),h=l("v-card-title"),b=l("v-card-text"),g=l("v-card"),C=l("v-col"),T=l("v-alert"),F=l("v-text-field"),B=l("v-textarea"),M=l("v-file-input"),k=l("v-btn"),L=l("v-form"),A=l("v-row");return s(),w("div",N,[t.loading?(s(),w("div",E,[i(d,{indeterminate:"",color:"primary",size:"64"}),e[5]||(e[5]=a("p",{class:"text-body-1 text-medium-emphasis mt-4"},"Loading career details...",-1))])):t.career?(s(),w("div",U,[a("section",q,[e[6]||(e[6]=a("div",{class:"hero-bg-gradient"},null,-1)),e[7]||(e[7]=a("div",{class:"hero-pattern"},null,-1)),i(V,{class:"position-relative z-index-2"},{default:r(()=>[i(z,{appear:""},{default:r(()=>[a("div",null,[a("h1",j,y(t.career.title),1),a("div",O,[t.career.department?(s(),u(x,{key:0,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(m,{icon:"mdi-office-building",class:"mr-2"}),c(" "+y(t.career.department),1)]),_:1})):v("",!0),t.career.location?(s(),u(x,{key:1,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(m,{icon:"mdi-map-marker",class:"mr-2"}),c(" "+y(t.career.location),1)]),_:1})):v("",!0),t.career.employment_type?(s(),u(x,{key:2,color:"white",variant:"flat",size:"large"},{default:r(()=>[i(m,{icon:"mdi-briefcase-clock",class:"mr-2"}),a("span",R,y(t.career.employment_type),1)]),_:1})):v("",!0)])])]),_:1})]),_:1})]),a("section",I,[i(V,null,{default:r(()=>[i(A,null,{default:r(()=>[i(C,{cols:"12",md:"8"},{default:r(()=>[i(g,{class:"mb-6",elevation:"2"},{default:r(()=>[i(h,{class:"bg-primary text-white"},{default:r(()=>e[8]||(e[8]=[c("Job Description")])),_:1,__:[8]}),i(b,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.description||"No description available."},null,8,J)]),_:1})]),_:1}),t.career.responsibilities?(s(),u(g,{key:0,class:"mb-6",elevation:"2"},{default:r(()=>[i(h,{class:"bg-primary text-white"},{default:r(()=>e[9]||(e[9]=[c("Responsibilities")])),_:1,__:[9]}),i(b,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.responsibilities},null,8,K)]),_:1})]),_:1})):v("",!0),t.career.requirements?(s(),u(g,{key:1,class:"mb-6",elevation:"2"},{default:r(()=>[i(h,{class:"bg-primary text-white"},{default:r(()=>e[10]||(e[10]=[c("Requirements")])),_:1,__:[10]}),i(b,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.requirements},null,8,X)]),_:1})]),_:1})):v("",!0),t.career.benefits?(s(),u(g,{key:2,class:"mb-6",elevation:"2"},{default:r(()=>[i(h,{class:"bg-primary text-white"},{default:r(()=>e[11]||(e[11]=[c("Benefits")])),_:1,__:[11]}),i(b,{class:"pa-6"},{default:r(()=>[a("div",{innerHTML:t.career.benefits},null,8,Y)]),_:1})]),_:1})):v("",!0)]),_:1}),i(C,{cols:"12",md:"4"},{default:r(()=>[i(g,{class:S(["sticky-top",{"application-closed":!t.career.is_active}]),elevation:"2"},{default:r(()=>[i(h,{class:"bg-primary text-white"},{default:r(()=>[i(m,{icon:"mdi-file-document-edit",class:"mr-2"}),e[12]||(e[12]=c(" Apply for this Position "))]),_:1,__:[12]}),i(b,{class:"pa-6"},{default:r(()=>[t.career.is_active?t.career.deadline?(s(),u(T,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:r(()=>[a("div",G,[e[14]||(e[14]=a("strong",null,"Application Deadline:",-1)),e[15]||(e[15]=a("br",null,null,-1)),c(" "+y(n.formatDate(t.career.deadline)),1)])]),_:1})):v("",!0):(s(),u(T,{key:0,type:"warning",variant:"tonal",class:"mb-4"},{default:r(()=>e[13]||(e[13]=[c(" This position is no longer accepting applications. ")])),_:1,__:[13]})),t.career.is_active?(s(),u(L,{key:2,ref:"applicationForm"},{default:r(()=>[i(F,{modelValue:t.applicationForm.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.applicationForm.name=o),label:"Full Name *",variant:"outlined",rules:[o=>!!o||"Name is required"],density:"compact","prepend-inner-icon":"mdi-account"},null,8,["modelValue","rules"]),i(F,{modelValue:t.applicationForm.email,"onUpdate:modelValue":e[1]||(e[1]=o=>t.applicationForm.email=o),label:"Email *",type:"email",variant:"outlined",rules:[o=>!!o||"Email is required",o=>/.+@.+\..+/.test(o)||"Email must be valid"],density:"compact","prepend-inner-icon":"mdi-email"},null,8,["modelValue","rules"]),i(F,{modelValue:t.applicationForm.phone,"onUpdate:modelValue":e[2]||(e[2]=o=>t.applicationForm.phone=o),label:"Phone",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone",placeholder:"01707080401 or +8801707080401",rules:[o=>!o||n.validateBangladeshPhone(o)||"Please enter a valid Bangladesh phone number (e.g., 01707080401 or +8801707080401)"],hint:"Bangladesh phone number format","persistent-hint":""},null,8,["modelValue","rules"]),i(B,{modelValue:t.applicationForm.cover_letter,"onUpdate:modelValue":e[3]||(e[3]=o=>t.applicationForm.cover_letter=o),label:"Cover Letter",variant:"outlined",rows:"4",density:"compact","prepend-inner-icon":"mdi-text",hint:"Tell us why you're interested in this position","persistent-hint":""},null,8,["modelValue"]),i(M,{modelValue:t.applicationForm.resume,"onUpdate:modelValue":e[4]||(e[4]=o=>t.applicationForm.resume=o),label:"Resume (PDF, DOC, DOCX)",variant:"outlined",density:"compact","prepend-icon":"","prepend-inner-icon":"mdi-file-document",accept:".pdf,.doc,.docx",rules:[o=>!o||o.size<5242880||"File size must be less than 5MB"],hint:"Max file size: 5MB","persistent-hint":"","show-size":""},null,8,["modelValue","rules"]),i(k,{color:"primary",variant:"flat",block:"",size:"large",onClick:n.submitApplication,loading:t.submitting,disabled:!t.career.is_active},{default:r(()=>[i(m,{icon:"mdi-send",class:"mr-2"}),e[16]||(e[16]=c(" Submit Application "))]),_:1,__:[16]},8,["onClick","loading","disabled"])]),_:1},512)):v("",!0)]),_:1})]),_:1},8,["class"]),i(k,{color:"grey",variant:"outlined",block:"",class:"mt-4",to:{name:"Careers"}},{default:r(()=>[i(m,{icon:"mdi-arrow-left",class:"mr-2"}),e[17]||(e[17]=c(" Back to Careers "))]),_:1,__:[17]})]),_:1})]),_:1})]),_:1})])])):(s(),w("div",Q,[i(m,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),e[19]||(e[19]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Career not found",-1)),e[20]||(e[20]=a("p",{class:"text-body-2 text-medium-emphasis mb-6"}," The career opportunity you're looking for doesn't exist or has been removed. ",-1)),i(k,{color:"primary",to:{name:"Careers"}},{default:r(()=>e[18]||(e[18]=[c("View All Careers")])),_:1,__:[18]})]))])}const $=P(H,[["render",W],["__scopeId","data-v-6b5d49dd"]]);export{$ as default};
