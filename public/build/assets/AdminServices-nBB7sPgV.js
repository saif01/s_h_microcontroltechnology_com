import{_ as U,d as c,a as l,b as n,w as i,f as p,r as o,g as h,t as a,F as z,e as A,c as N,h as y,o as u}from"./app-DEFCgX4U.js";import{a as D}from"./adminPaginationMixin-DN7Wb3ng.js";const E={mixins:[D],data(){return{services:[],showDialog:!1,publishedFilter:null,publishedOptions:[{title:"Published",value:!0},{title:"Draft",value:!1}]}},async mounted(){await this.loadServices()},methods:{async loadServices(){try{this.loading=!0;const t=this.buildPaginationParams();this.search&&(t.search=this.search),this.publishedFilter!==null&&(t.published=this.publishedFilter);const e=await y.get("/api/v1/services",{params:t,headers:this.getAuthHeaders()});this.services=e.data.data||[],this.updatePagination(e.data)}catch(t){this.handleApiError(t,"Failed to load services")}finally{this.loading=!1}},editService(t){alert("Edit functionality coming soon")},async deleteService(t){if(confirm("Are you sure you want to delete this service?"))try{await y.delete(`/api/v1/services/${t}`,{headers:this.getAuthHeaders()}),this.showSuccess("Service deleted successfully"),await this.loadServices()}catch(e){this.handleApiError(e,"Error deleting service")}},onPerPageChange(){this.resetPagination(),this.loadServices()},onSort(t){this.handleSort(t),this.loadServices()}}},B={class:"page-header"},I={class:"text-caption text-grey"},M={key:0},O={class:"d-flex align-center"},T={class:"d-flex align-center"},j={class:"d-flex align-center"},H={key:0},L={class:"d-flex justify-space-between align-center mt-4"},R={class:"text-caption text-grey"},q={key:0},x={key:1};function G(t,e,J,K,d,r){const m=o("v-btn"),f=o("v-select"),v=o("v-col"),P=o("v-text-field"),V=o("v-row"),b=o("v-card-text"),S=o("v-card"),k=o("v-card-title"),g=o("v-icon"),_=o("v-chip"),w=o("v-table"),C=o("v-pagination");return u(),c("div",null,[l("div",B,[e[9]||(e[9]=l("h1",{class:"text-h4 page-title"},"Services Management",-1)),n(m,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=s=>d.showDialog=!0),class:"add-button"},{default:i(()=>e[8]||(e[8]=[p("Create Service")])),_:1,__:[8]})]),n(S,{class:"mb-4"},{default:i(()=>[n(b,null,{default:i(()=>[n(V,null,{default:i(()=>[n(v,{cols:"12",md:"4"},{default:i(()=>[n(f,{modelValue:t.perPage,"onUpdate:modelValue":[e[1]||(e[1]=s=>t.perPage=s),r.onPerPageChange],items:t.perPageOptions,label:"Items per page","prepend-inner-icon":"mdi-format-list-numbered",variant:"outlined",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(v,{cols:"12",md:"4"},{default:i(()=>[n(f,{modelValue:d.publishedFilter,"onUpdate:modelValue":[e[2]||(e[2]=s=>d.publishedFilter=s),r.loadServices],items:d.publishedOptions,label:"Filter by Status","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),n(v,{cols:"12",md:"4"},{default:i(()=>[n(P,{modelValue:t.search,"onUpdate:modelValue":[e[3]||(e[3]=s=>t.search=s),r.loadServices],label:"Search services","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),n(S,null,{default:i(()=>[n(k,{class:"d-flex justify-space-between align-center"},{default:i(()=>[e[11]||(e[11]=l("span",null,"Services",-1)),l("span",I,[e[10]||(e[10]=p(" Total Records: ")),l("strong",null,a(t.pagination.total||0),1),d.services.length>0?(u(),c("span",M," | Showing "+a((t.currentPage-1)*t.perPage+1)+" to "+a(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+a(t.pagination.total),1)):h("",!0)])]),_:1,__:[11]}),n(b,null,{default:i(()=>[n(w,null,{default:i(()=>[l("thead",null,[l("tr",null,[l("th",{class:"sortable",onClick:e[4]||(e[4]=s=>r.onSort("title"))},[l("div",O,[e[12]||(e[12]=p(" Title ")),n(g,{icon:t.getSortIcon("title"),size:"small",class:"ml-1"},null,8,["icon"])])]),l("th",{class:"sortable",onClick:e[5]||(e[5]=s=>r.onSort("slug"))},[l("div",T,[e[13]||(e[13]=p(" Slug ")),n(g,{icon:t.getSortIcon("slug"),size:"small",class:"ml-1"},null,8,["icon"])])]),l("th",{class:"sortable",onClick:e[6]||(e[6]=s=>r.onSort("published"))},[l("div",j,[e[14]||(e[14]=p(" Published ")),n(g,{icon:t.getSortIcon("published"),size:"small",class:"ml-1"},null,8,["icon"])])]),e[15]||(e[15]=l("th",null,"Actions",-1))])]),l("tbody",null,[(u(!0),c(z,null,A(d.services,s=>(u(),c("tr",{key:s.id},[l("td",null,a(s.title),1),l("td",null,[n(_,{size:"small",variant:"outlined"},{default:i(()=>[p(a(s.slug),1)]),_:2},1024)]),l("td",null,[n(_,{color:s.published?"success":"error",size:"small"},{default:i(()=>[p(a(s.published?"Published":"Draft"),1)]),_:2},1032,["color"])]),l("td",null,[n(m,{size:"small",icon:"mdi-pencil",onClick:F=>r.editService(s),variant:"text"},null,8,["onClick"]),n(m,{size:"small",icon:"mdi-delete",onClick:F=>r.deleteService(s.id),variant:"text",color:"error"},null,8,["onClick"])])]))),128)),d.services.length===0?(u(),c("tr",H,e[16]||(e[16]=[l("td",{colspan:"4",class:"text-center py-4"},"No services found",-1)]))):h("",!0)])]),_:1}),l("div",L,[l("div",R,[d.services.length>0?(u(),c("span",q," Showing "+a((t.currentPage-1)*t.perPage+1)+" to "+a(Math.min(t.currentPage*t.perPage,t.pagination.total))+" of "+a(t.pagination.total)+" records ",1)):(u(),c("span",x," No records found "))]),t.pagination.last_page>1?(u(),N(C,{key:0,modelValue:t.currentPage,"onUpdate:modelValue":[e[7]||(e[7]=s=>t.currentPage=s),r.loadServices],length:t.pagination.last_page},null,8,["modelValue","length","onUpdate:modelValue"])):h("",!0)])]),_:1})]),_:1})])}const X=U(E,[["render",G]]);export{X as default};
